<html>

    <head>
        <title>pomo</title>
        <meta charset="UTF-8">
        <meta name="description" content="Pomodoro App">
        <meta name="keywords" content="pomodoro,task,timer">
        <meta name="author" content="Gabriele Fontana <gafreax@gmail.com>">
        <link href="favicon.ico" rel="icon" type="image/x-icon" />
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/bootstrap-theme.min.css" />
        <script src="js/jquery.slim.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

    </head>

    <body>
        <div class="container-fluid">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">
                        <img alt="Brand" src="images/favicon.png" width="20" height="20">
                        <p class="navbar-text"> pomo </p>
                    </a>
                    </div>
                </div>
            </nav>
            <div class="container-fluid">
                <div class="jumbotron" id="menu">
                    <button id="btnStart">Start</button>
                </div>
                <div class="jumbotron" id="counter">
                    <span id="min">00</span>:<span id="sec">00</span>
                </div>
            </div>
            <div class="container-fluid">
                <form class="form">
                </form>
            </div>
    </body>
    <script>
        var activeCounter = false;

        function addSec() {
            var timeDiv = $("#sec");
            var sec = timeDiv.html();
            sec = parseInt(sec) + 1
            if (sec == 60) {
                addMin();
                timeDiv.html("00");
            } else {
                timeDiv.html(sec > 9 ? sec : "0" + sec);
            }
        }

        function addMin() {
            var timeDiv = $("#min");
            var min = timeDiv.html();
            min = parseInt(min) + 1;
            if (min == 1) {
                Notification.requestPermission().then(function(result) {
                    activeCounter = false;
                    notify = new Notification("Pomodoro", {
                        body: "Finished!",
                        icon: "favicon.png"
                    });
                });
                timeDiv.html(0);
            } else {
                timeDiv.html(min > 9 ? min : "0" + min);
            }
        }

        function timing() {
            var sec = addSec();
            if (activeCounter) window.setTimeout(timing, 1000);
        }
        $(document).ready(function() {
            $("#btnStart").click(function() {
                activeCounter = true;
                timing();
            })
        });
    </script>

</html>
